"use strict";(self.webpackChunkplentymarkets_feedback=self.webpackChunkplentymarkets_feedback||[]).push([[1],{113:function(e,t,a){var s=a(6518),n=a(9213).find,r=a(6469),i="find",o=!0;i in[]&&Array(1)[i]((function(){o=!1})),s({target:"Array",proto:!0,forced:o},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),r(i)},1335:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});a(2010);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"feedback-comment",class:e.classes,style:e.styles},[e.isReply?e._e():t("div",[t("p",{staticClass:"feedback-comment-title"},[e._v("\n      "+e._s(e.feedbackData.title)+"\n    ")]),e._v(" "),e.feedbackData.feedbackRating.rating.ratingValue>0?t("div",{staticClass:"feedback-rating"},e._l(5,(function(a){return t("i",{key:"feedback_rating_"+a,staticClass:"fa fa-star",class:{full:e.feedbackData.feedbackRating.rating.ratingValue>=a,empty:e.feedbackData.feedbackRating.rating.ratingValue<a}})})),0):e._e(),e._v(" "),t("div",{staticClass:"feedback-attributes-list"},[t("p",[e.isPurchased?t("span",{staticClass:"feedback-verified-tag"},[e._v("\n          "+e._s(e.$translate("Feedback::Feedback.verifiedPurchase"))+"\n        ")]):e._e(),e._v(" "),e._l(e.variationAttributes,(function(a,s){return t("span",{key:"feedback_attributes_"+s,staticClass:"feedback-attributes"},[e._v("\n          "+e._s(a.name)+": "+e._s(a.value)+"\n        ")])}))],2)])]),e._v(" "),t("p",{staticClass:"feedback-comment-text",domProps:{textContent:e._s(e.message)}}),e._v(" "),t("p",{staticClass:"feedback-info"},[t("span",{staticClass:"feedback-info-segment"},[t("strong",["user"===e.feedbackData.sourceRelation[0].feedbackRelationType?t("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"feedback-admin",attrs:{"data-toggle":"tooltip","data-placement":"top","data-original-title":e.$translate("Feedback::Feedback.shopManagerLabel")}},[t("i",{staticClass:"fa fa-check-square"}),e._v("\n          "+e._s(e.feedbackData.sourceRelation[0].sourceRelationLabel)+"\n        ")]):"contact"===e.feedbackData.sourceRelation[0].feedbackRelationType&&e.feedbackData.sourceRelation[0].feedbackRelationSourceId>0?t("span",[e._v("\n          "+e._s(e.feedbackData.sourceRelation[0].sourceRelationLabel)+"\n        ")]):0==e.feedbackData.sourceRelation[0].feedbackRelationSourceId&&e.feedback.authorName.length>0?t("span",[e._v("\n          "+e._s(e.feedbackData.authorName)+"\n        ")]):t("span",[e._v("\n          "+e._s(e.displayName)+"\n        ")])])]),e._v(" "),e.options.timestampVisibility?t("span",{staticClass:"feedback-info-segment"},[t("i",{staticClass:"fa fa-calendar text-muted"}),e._v("\n      "+e._s(e._f("date")(e.feedbackData.createdAt,e.$translate("Ceres::Template.devDateFormatMoment")||"DD.MM.YYYY"))+"\n    ")]):e._e(),e._v(" "),e.isReply||!e.authenticatedUser.isLoggedIn&&!e.options.allowGuestFeedbacks?e._e():t("span",{staticClass:"feedback-info-segment btn btn-sm btn-default",on:{click:function(t){e.replyFormVisible=!e.replyFormVisible}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.addComment"))+"\n    ")]),e._v(" "),e.feedbackData.replies&&e.feedbackData.replies.length>0&&!e.replyListVisible?t("span",{staticClass:"feedback-info-segment btn btn-sm btn-default",on:{click:function(t){e.replyListVisible=!e.replyListVisible}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.viewComments"))+" ("+e._s(e.feedbackData.replies.length)+")\n    ")]):e.feedbackData.replies&&e.feedbackData.replies.length>0&&e.replyListVisible?t("span",{staticClass:"feedback-info-segment btn btn-sm btn-default",on:{click:function(t){e.replyListVisible=!e.replyListVisible}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.hideComments"))+"\n    ")]):e._e()]),e._v(" "),e.replyFormVisible&&!e.isReply&&(e.authenticatedUser.isLoggedIn||e.options.allowGuestFeedbacks)?t("div",{staticClass:"feedback-add-reply"},[!e.authenticatedUser.isLoggedIn&&e.options.allowGuestFeedbacks?t("div",{staticClass:"form-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.authorName,expression:"authorName"}],staticClass:"form-control",attrs:{id:"author",type:"text",name:"author",placeholder:e.$translate("Feedback::Feedback.authorName"),disabled:e.authenticatedUser.limitReached||!e.authenticatedUser.hasPurchased},domProps:{value:e.authorName},on:{input:function(t){t.target.composing||(e.authorName=t.target.value)}}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.honeypot,expression:"honeypot"}],staticClass:"form-control",attrs:{id:"comment-textfield",type:"text",name:"comment-textfield"},domProps:{value:e.honeypot},on:{input:function(t){t.target.composing||(e.honeypot=t.target.value)}}})]):e._e(),e._v(" "),t("div",{staticClass:"form-group"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.replyMessage,expression:"replyMessage"}],staticClass:"form-control",attrs:{name:"message",rows:"3",placeholder:e.$translate("Feedback::Feedback.commentMessage")},domProps:{value:e.replyMessage},on:{input:function(t){t.target.composing||(e.replyMessage=t.target.value)}}})]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-appearance",attrs:{disabled:!e.replyMessage},on:{click:function(t){return e.createReply()}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.submitComment"))+"\n    ")])]):e._e(),e._v(" "),e.feedbackData.replies&&e.feedbackData.replies.length>0&&e.replyListVisible?t("div",{staticClass:"feedback-replies"},e._l(e.feedbackData.replies,(function(a){return t("feedback-list-entry",{key:a.id,attrs:{feedback:a,"is-reply":!0,"show-controls":e.showControls,classes:e.classes,styles:e.styles,options:e.options},on:{delete:function(t){return e.$emit("delete",t)}}})})),1):e._e()])};s._withStripped=!0;a(2675),a(9463),a(2259),a(5700),a(2008),a(113),a(3792),a(2062),a(9572),a(2892),a(3851),a(1278),a(9432),a(6099),a(7764),a(3500),a(2953);var n=a(1154),r=a(5353);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function c(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=i(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l={name:"FeedbackComment",components:{"feedback-list-entry":n.A},props:{feedback:Object,isReply:Boolean,showControls:Boolean,classes:String,styles:String,options:Object},data:function(){return{authorName:"",replyMessage:"",replyFormVisible:!1,replyListVisible:!1,honeypot:"",feedbackData:{}}},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({variationAttributes:function(){if("variation"!==this.feedbackData.targetRelation.feedbackRelationType||this.feedbackData.targetRelation.targetRelationName.length<=0||!this.feedbackData.targetRelation.variationAttributes||!this.itemAttributes)return[];var e=this;return this.feedbackData.targetRelation.variationAttributes.map((function(t){var a=e.feedbackData.targetRelation.feedbackRelationTargetId;if(!Object.prototype.hasOwnProperty.call(e.itemAttributes,a)||!Object.prototype.hasOwnProperty.call(e.itemAttributes[a],t.attributeId)||!Object.prototype.hasOwnProperty.call(e.itemAttributes[a][t.attributeId],t.valueId))return null;var s=e.itemAttributes[a][t.attributeId][t.valueId];return{name:s.attributeName,value:s.attributeValue}})).filter((function(e){return null!==e}))},displayName:function(){var e=this.feedbackData.sourceRelation[0].sourceRelationLabel,t=this.$translate("Feedback::Feedback.guestName");return" "!==t?t:e},message:function(){return this.feedbackData.feedbackComment?this.feedbackData.feedbackComment.comment.message:""},isPurchased:function(){return this.feedbackData.sourceRelation.find((function(e){return"orderItem"===e.feedbackRelationType}))}},(0,r.aH)({authenticatedUser:function(e){return e.feedback.authenticatedUser},itemAttributes:function(e){return e.feedback.itemAttributes}})),created:function(){this.feedbackData=this.feedback},methods:{createReply:function(){if(this.replyMessage&&!(this.honeypot.length>0)){var e=this;$.ajax({type:"POST",url:"/rest/feedbacks/feedback/create",data:{authorName:this.authorName,message:this.replyMessage,targetId:this.feedbackData.id,type:"reply"},contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"json",xhrFields:{withCredentials:!0},success:function(t){e.feedbackData.replies||(e.feedbackData.replies=[]),e.feedbackData.replies.unshift(t),e.replyMessage="",e.replyFormVisible=!1,e.replyListVisible=!0}})}}}},d=l,u=(0,a(4486).A)(d,s,[],!1,null,null,null).exports},2010:function(e,t,a){var s=a(3724),n=a(350).EXISTS,r=a(9504),i=a(2106),o=Function.prototype,c=r(o.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=r(l.exec);s&&!n&&i(o,"name",{configurable:!0,get:function(){try{return d(l,c(this))[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=feedback-1.min.js.map