(self.webpackChunkplentymarkets_feedback=self.webpackChunkplentymarkets_feedback||[]).push([[3],{4304:function(e,t,a){"use strict";a.d(t,{A:function(){return u}});a(115),a(17),a(9581);var s=!1,i=!1,n={setFeedbackAuthenticatedUser:function(e,t){e.authenticatedUser=t,e.invisibleFeedbacks=e.authenticatedUser.feedbacks.filter((function(e){return!e.isVisible}))},setFeedbackCounts:function(e,t){e.counts=t},setFeedbacks:function(e,t){e.feedbacks=e.feedbacks.concat(t)},setFeedbackItemAttributes:function(e,t){e.itemAttributes=t},setFeedbackPagination:function(e,t){e.pagination.lastPage=t.lastPage,e.pagination.isLastPage=t.isLastPage},incrementCurrentFeedbackPage:function(e){e.pagination.currentPage++},addFeedback:function(e,t){if(e.authenticatedUser.feedbacks.unshift(t),e.invisibleFeedbacks.unshift(t),t.isVisible){var a=parseInt(t.feedbackRating.rating.ratingValue);a>0&&a<=5&&(e.counts["ratingsCountOf"+a]++,e.counts.ratingsCountTotal++,l(e))}},deleteFeedback:function(e,t){var a=t.feedbackId,s=t.parentFeedbackId,i=t.feedback;if(i.isVisible&&null===s){var n=parseInt(i.feedbackRating.rating.ratingValue);n>0&&n<=5&&(e.counts["ratingsCountOf"+n]--,e.counts.ratingsCountTotal--,l(e))}null===s?(e.feedbacks=o(e.feedbacks,a),e.authenticatedUser.feedbacks=o(e.authenticatedUser.feedbacks,a),e.invisibleFeedbacks=o(e.invisibleFeedbacks,a)):(e.feedbacks=d(e.feedbacks,s,a),e.authenticatedUser.feedbacks=d(e.authenticatedUser.feedbacks,s,a),e.invisibleFeedbacks=d(e.invisibleFeedbacks,s,a))}},r={loadFeedbackUser:function(e,t){var a=e.commit,s=t.itemId,n=t.variationId;if(!i){i=!0;var r="";return void 0!==s&&void 0!==n&&(r="/".concat(s,"/").concat(n)),$.ajax({type:"GET",url:"/rest/feedbacks/user"+r,success:function(e){a("setFeedbackAuthenticatedUser",e),i=!1},error:function(e,t,a){i=!1,console.error(a)}})}},loadPaginatedFeedbacks:function(e,t){var a=e.commit,i=e.state,n=t.itemId,r=t.feedbacksPerPage,c=t.language;if(!s){s=!0;var o=$.ajax({type:"GET",url:"/rest/storefront/feedbacks/feedback/helper/feedbacklist/"+n+"/"+i.pagination.currentPage,beforeSend:function(e){e.setRequestHeader("lang",c)},data:{feedbacksPerPage:r},success:function(e){a("setFeedbacks",e.feedbacks),a("setFeedbackItemAttributes",e.itemAttributes),a("setFeedbackPagination",e.pagination),a("setFeedbackCounts",e.counts),s=!1},error:function(e,t,a){console.error(a),s=!1}});return c&&a("incrementCurrentFeedbackPage"),o}},deleteFeedback:function(e,t){var a=e.commit,s=(e.state,t.feedbackId),i=t.parentFeedbackId,n=t.feedback;return $.ajax({type:"DELETE",url:"/rest/feedbacks/feedback/delete/"+s,success:function(e){a("deleteFeedback",{feedbackId:s,parentFeedbackId:i,feedback:n})}})}},c={state:function(){return{authenticatedUser:{},invisibleFeedbacks:[],counts:{},feedbacks:[],itemAttributes:[],pagination:{isLastPage:!0,lastPage:1,currentPage:1}}},mutations:n,actions:r,getters:{}};function o(e,t){return e.filter((function(e){return e.id!==t}))}function d(e,t,a){return e.map((function(e){return t===e.id&&(e.replies=e.replies.filter((function(e){return e.id!==a}))),e}))}function l(e){var t=0;t+=5*e.counts.ratingsCountOf5,t+=4*e.counts.ratingsCountOf4,t+=3*e.counts.ratingsCountOf3,t+=2*e.counts.ratingsCountOf2,t+=1*e.counts.ratingsCountOf1,t/=e.counts.ratingsCountTotal,e.counts.averageValue=t}var u={created:function(){this.$store.hasModule("feedback")||App.isSSR||this.$store.registerModule("feedback",c,{preserveState:!!this.$store.state.feedback})}}},7473:function(e,t,a){var s=a(5335);e.exports=function(e){if(!s(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},298:function(e,t,a){var s=a(1602),i=a(3105),n=a(3610),r=s("unscopables"),c=Array.prototype;null==c[r]&&n.f(c,r,{configurable:!0,value:i(null)}),e.exports=function(e){c[r][e]=!0}},516:function(e,t,a){"use strict";var s=a(1344).forEach,i=a(2349)("forEach");e.exports=i?[].forEach:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}},5549:function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},3054:function(e,t,a){var s=a(5335),i=a(9686);e.exports=function(e,t,a){var n,r;return i&&"function"==typeof(n=t.constructor)&&n!==a&&s(r=n.prototype)&&r!==a.prototype&&i(e,r),e}},3105:function(e,t,a){var s,i=a(3938),n=a(5318),r=a(290),c=a(7708),o=a(8890),d=a(3262),l=a(5904),u="prototype",b="script",f=l("IE_PROTO"),p=function(){},k=function(e){return"<"+b+">"+e+"</"+b+">"},v=function(){try{s=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t,a;v=s?function(e){e.write(k("")),e.close();var t=e.parentWindow.Object;return e=null,t}(s):(t=d("iframe"),a="java"+b+":",t.style.display="none",o.appendChild(t),t.src=String(a),(e=t.contentWindow.document).open(),e.write(k("document.F=Object")),e.close(),e.F);for(var i=r.length;i--;)delete v[u][r[i]];return v()};c[f]=!0,e.exports=Object.create||function(e,t){var a;return null!==e?(p[u]=i(e),a=new p,p[u]=null,a[f]=e):a=v(),void 0===t?a:n(a,t)}},5318:function(e,t,a){var s=a(5077),i=a(3610),n=a(3938),r=a(1641);e.exports=s?Object.defineProperties:function(e,t){n(e);for(var a,s=r(t),c=s.length,o=0;c>o;)i.f(e,a=s[o++],t[a]);return e}},1641:function(e,t,a){var s=a(6347),i=a(290);e.exports=Object.keys||function(e){return s(e,i)}},9686:function(e,t,a){var s=a(3938),i=a(7473);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,a={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(a,[]),t=a instanceof Array}catch(e){}return function(a,n){return s(a),i(n),t?e.call(a,n):a.__proto__=n,a}}():void 0)},6844:function(e,t,a){"use strict";var s=a(3938);e.exports=function(){var e=s(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},9233:function(e,t,a){var s=a(2074),i=a(5073);e.exports=function(e){return s((function(){return!!i[e]()||"​᠎"!="​᠎"[e]()||i[e].name!==e}))}},9163:function(e,t,a){var s=a(1229),i="["+a(5073)+"]",n=RegExp("^"+i+i+"*"),r=RegExp(i+i+"*$"),c=function(e){return function(t){var a=String(s(t));return 1&e&&(a=a.replace(n,"")),2&e&&(a=a.replace(r,"")),a}};e.exports={start:c(1),end:c(2),trim:c(3)}},5073:function(e){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},8476:function(e,t,a){"use strict";var s=a(1605),i=a(516);s({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},7746:function(e,t,a){"use strict";var s=a(1605),i=a(8186).includes,n=a(298);s({target:"Array",proto:!0},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n("includes")},4009:function(e,t,a){"use strict";var s=a(5077),i=a(200),n=a(4977),r=a(7485),c=a(1883),o=a(8569),d=a(3054),l=a(874),u=a(2074),b=a(3105),f=a(4789).f,p=a(7632).f,k=a(3610).f,v=a(9163).trim,g="Number",m=i[g],h=m.prototype,_=o(b(h))==g,F=function(e){var t,a,s,i,n,r,c,o,d=l(e,!1);if("string"==typeof d&&d.length>2)if(43===(t=(d=v(d)).charCodeAt(0))||45===t){if(88===(a=d.charCodeAt(2))||120===a)return NaN}else if(48===t){switch(d.charCodeAt(1)){case 66:case 98:s=2,i=49;break;case 79:case 111:s=8,i=55;break;default:return+d}for(r=(n=d.slice(2)).length,c=0;c<r;c++)if((o=n.charCodeAt(c))<48||o>i)return NaN;return parseInt(n,s)}return+d};if(n(g,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var y,C=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof C&&(_?u((function(){h.valueOf.call(a)})):o(a)!=g)?d(new m(F(t)),a,C):F(t)},w=s?f(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),O=0;w.length>O;O++)c(m,y=w[O])&&!c(C,y)&&k(C,y,p(m,y));C.prototype=h,h.constructor=C,r(i,g,C)}},6048:function(e,t,a){"use strict";var s=a(7485),i=a(3938),n=a(2074),r=a(6844),c="toString",o=RegExp.prototype,d=o[c],l=n((function(){return"/a/b"!=d.call({source:"a",flags:"b"})})),u=d.name!=c;(l||u)&&s(RegExp.prototype,c,(function(){var e=i(this),t=String(e.source),a=e.flags;return"/"+t+"/"+String(void 0===a&&e instanceof RegExp&&!("flags"in o)?r.call(e):a)}),{unsafe:!0})},8329:function(e,t,a){"use strict";var s=a(1605),i=a(9163).trim;s({target:"String",proto:!0,forced:a(9233)("trim")},{trim:function(){return i(this)}})},8379:function(e,t,a){var s=a(200),i=a(5549),n=a(516),r=a(7712);for(var c in i){var o=s[c],d=o&&o.prototype;if(d&&d.forEach!==n)try{r(d,"forEach",n)}catch(e){d.forEach=n}}},8450:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return F}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"feedback-container"},[a("div",{staticClass:"title"},[e._v("\n    "+e._s(e.$translate("Feedback::Feedback.customerReviews"))+"\n    "),a("small",{staticClass:"feedback-average-count"},[e._v(" ("+e._s(e.counts.ratingsCountTotal)+")")])]),e._v(" "),a("div",{staticClass:"feedback-stars-average"},[a("div",{staticClass:"feedback-stars-background clearfix"},e._l(5,(function(e){return a("div",{key:"feedback_stars_background"+e,staticClass:"feedback-star"},[a("i",{staticClass:"fa fa-star"})])})),0),e._v(" "),a("div",{staticClass:"feedback-stars-overlay-wrap",style:{width:100*e.counts.averageValue/5+"%"}},[a("div",{staticClass:"feedback-stars-overlay clearfix"},e._l(5,(function(e){return a("div",{key:"feedback_stars_overlay_"+e,staticClass:"feedback-star"},[a("i",{staticClass:"fa fa-star"})])})),0)])]),e._v(" "),a("hr"),e._v(" "),a("div",{staticClass:"row my-2",class:e.classes,style:e.styles},[a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"feedback-bars"},[a("div",{staticClass:"feedback-bar-wrap"},[e._m(0),e._v(" "),a("div",{staticClass:"feedback-bar"},[a("div",{staticClass:"feedback-bar-fill bg-primary bg-appearance",style:{width:e.counts.ratingsCountOf5/e.counts.highestCount*100+"%"}})]),e._v(" "),a("p",{staticClass:"feedback-bar-text-after"},[e._v("\n            "+e._s(e.counts.ratingsCountOf5)+"\n          ")])]),e._v(" "),a("div",{staticClass:"feedback-bar-wrap"},[e._m(1),e._v(" "),a("div",{staticClass:"feedback-bar"},[a("div",{staticClass:"feedback-bar-fill bg-primary bg-appearance",style:{width:e.counts.ratingsCountOf4/e.counts.highestCount*100+"%"}})]),e._v(" "),a("p",{staticClass:"feedback-bar-text-after"},[e._v("\n            "+e._s(e.counts.ratingsCountOf4)+"\n          ")])]),e._v(" "),a("div",{staticClass:"feedback-bar-wrap"},[e._m(2),e._v(" "),a("div",{staticClass:"feedback-bar"},[a("div",{staticClass:"feedback-bar-fill bg-primary bg-appearance",style:{width:e.counts.ratingsCountOf3/e.counts.highestCount*100+"%"}})]),e._v(" "),a("p",{staticClass:"feedback-bar-text-after"},[e._v("\n            "+e._s(e.counts.ratingsCountOf3)+"\n          ")])]),e._v(" "),a("div",{staticClass:"feedback-bar-wrap"},[e._m(3),e._v(" "),a("div",{staticClass:"feedback-bar"},[a("div",{staticClass:"feedback-bar-fill bg-primary bg-appearance",style:{width:e.counts.ratingsCountOf2/e.counts.highestCount*100+"%"}})]),e._v(" "),a("p",{staticClass:"feedback-bar-text-after"},[e._v("\n            "+e._s(e.counts.ratingsCountOf2)+"\n          ")])]),e._v(" "),a("div",{staticClass:"feedback-bar-wrap"},[e._m(4),e._v(" "),a("div",{staticClass:"feedback-bar"},[a("div",{staticClass:"feedback-bar-fill bg-primary bg-appearance",style:{width:e.counts.ratingsCountOf1/e.counts.highestCount*100+"%"}})]),e._v(" "),a("p",{staticClass:"feedback-bar-text-after"},[e._v("\n            "+e._s(e.counts.ratingsCountOf1)+"\n          ")])])])]),e._v(" "),a("div",{staticClass:"col-sm-6"},[e.isLoading?e._e():a("feedback-form",{attrs:{"variation-id":e.variationId,options:e.optionsForm}})],1)]),e._v(" "),a("hr"),e._v(" "),a("feedback-list",{attrs:{feedbacks:e.invisibleFeedbacks,"is-last-page":!0,"show-controls":!0,classes:e.classes,styles:e.styles,options:e.optionsList},on:{delete:function(t){return e.showDeleteConfirmation(t)}}}),e._v(" "),a("feedback-list",{attrs:{feedbacks:e.feedbacks,"is-last-page":e.pagination.isLastPage,"show-controls":!1,classes:e.classes,styles:e.styles,options:e.optionsList},on:{"load-more":function(t){return e.loadFeedbacks()},delete:function(t){return e.showDeleteConfirmation(t)}}}),e._v(" "),e.isLoading?a("p",{staticClass:"loading-hint"},[e._v("\n    "+e._s(e.$translate("Feedback::Feedback.loadingFeedbacks"))+"\n  ")]):e._e(),e._v(" "),a("div",{ref:"confirmDeleteModal",staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"feedbackConfirmDeleteLabel-"+e._uid,"aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("span",{staticClass:"modal-title h5",attrs:{id:"feedbackConfirmDeleteLabel-"+e._uid}},[e._v(e._s(e.$translate("Feedback::Feedback.deleteConfirm")))]),e._v(" "),e._m(5)]),e._v(" "),a("div",{staticClass:"modal-body"},[e.feedbackToDelete&&e.feedbackToDelete.isReply?a("p",{staticClass:"feedback-delete-confirmation"},[e._v("\n            "+e._s(e.$translate("Feedback::Feedback.deleteReply"))+"\n          ")]):a("p",{staticClass:"feedback-delete-confirmation"},[e._v("\n            "+e._s(e.$translate("Feedback::Feedback.deleteReview"))+"\n          ")])]),e._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[e._v("\n            "+e._s(e.$translate("Feedback::Feedback.cancel"))+"\n          ")]),e._v(" "),a("button",{staticClass:"btn btn-primary btn-appearance",attrs:{type:"button"},on:{click:function(t){return e.deleteFeedback()}}},[e._v("\n            "+e._s(e.$translate("Feedback::Feedback.yesDeleteIt"))+"\n          ")])])])])])],1)};s._withStripped=!0;a(8476),a(5086),a(6048),a(8329),a(8379);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.authenticatedUser.isLoggedIn||e.options.allowGuestFeedbacks?a("div",{staticClass:"createFeedback"},[a("div",{staticClass:"stars"},[a("fieldset",[a("legend",[a("span",{staticClass:"d-none"},[e._v(e._s(e.$translate("Feedback::Feedback.feedbackTextLegend")))])]),e._v(" "),e._l([5,4,3,2,1],(function(t){return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.feedback.ratingValue,expression:"feedback.ratingValue"}],key:"star_input_"+t,class:"star star-"+t,attrs:{id:"star-"+t+e._uid,type:"radio",name:"ratingValue"+e._uid},domProps:{value:t,checked:e._q(e.feedback.ratingValue,t)},on:{change:function(a){return e.$set(e.feedback,"ratingValue",t)}}}),e._v(" "),a("label",{key:"star_label_"+t,class:"star star-"+t,attrs:{for:"star-"+t+e._uid}},[a("span",{staticClass:"d-none"},[e._v(e._s(e.$translate("Feedback::Feedback.feedbackAverageLabel")))])])]}))],2)]),e._v(" "),e.ratingMissing?a("p",{staticClass:"feedback-error alert alert-danger"},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.ratingRequired"))+"\n    ")]):e._e(),e._v(" "),!e.authenticatedUser.isLoggedIn&&e.options.allowGuestFeedbacks?a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.feedback.authorName,expression:"feedback.authorName"}],staticClass:"form-control",attrs:{id:"author",type:"text",name:"author",placeholder:e.$translate("Feedback::Feedback.authorName"),disabled:e.authenticatedUser.limitReached||!e.authenticatedUser.hasPurchased},domProps:{value:e.feedback.authorName},on:{input:function(t){t.target.composing||e.$set(e.feedback,"authorName",t.target.value)}}}),e._v(" "),a("label",{staticClass:"position-absolute",attrs:{for:"author"}},[a("span",{staticClass:"d-none"},[e._v(e._s(e.$translate("Feedback::Feedback.authorName")))])]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.feedback.honeypot,expression:"feedback.honeypot"}],staticClass:"form-control",attrs:{id:"feedback-textfield",type:"text",name:"feedback-textfield"},domProps:{value:e.feedback.honeypot},on:{input:function(t){t.target.composing||e.$set(e.feedback,"honeypot",t.target.value)}}}),e._v(" "),a("label",{staticClass:"position-absolute",attrs:{for:"feedback-textfield"}},[a("span",{staticClass:"d-none"},[e._v(e._s(e.$translate("Feedback::Feedback.feedbackTextLabel")))])])]):e._e(),e._v(" "),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.feedback.title,expression:"feedback.title"}],staticClass:"form-control",class:{"is-invalid":e.titleMissing},attrs:{id:"title",type:"text",name:"title",placeholder:e.$translate("Feedback::Feedback.title"),disabled:e.authenticatedUser.limitReached||!e.authenticatedUser.hasPurchased},domProps:{value:e.feedback.title},on:{input:function(t){t.target.composing||e.$set(e.feedback,"title",t.target.value)}}}),e._v(" "),a("label",{staticClass:"position-absolute",attrs:{for:"title"}},[a("span",{staticClass:"d-none"},[e._v(e._s(e.$translate("Feedback::Feedback.title")))])]),e._v(" "),a("div",{staticClass:"invalid-feedback"},[e._v("\n        "+e._s(e.$translate("Feedback::Feedback.titleRequired"))+"\n      ")])]),e._v(" "),a("div",{staticClass:"form-group"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.feedback.message,expression:"feedback.message"}],staticClass:"form-control",attrs:{id:"message",name:"message",rows:"3",placeholder:e.$translate("Feedback::Feedback.reviewMessage"),disabled:e.authenticatedUser.limitReached||!e.authenticatedUser.hasPurchased},domProps:{value:e.feedback.message},on:{input:function(t){t.target.composing||e.$set(e.feedback,"message",t.target.value)}}}),e._v(" "),a("label",{staticClass:"position-absolute",attrs:{for:"message"}},[a("span",{staticClass:"d-none"},[e._v(e._s(e.$translate("Feedback::Feedback.reviewMessage")))])])]),e._v(" "),e.authenticatedUser.limitReached?a("div",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"feedback-tooltip-wrapper",attrs:{"data-toggle":"tooltip","data-placement":"top","data-original-title":e.$translate("Feedback::Feedback.maximumNumberOfFeedbacksReached")}},[a("button",{staticClass:"btn btn-primary btn-appearance",attrs:{disabled:""}},[e._v("\n        "+e._s(e.$translate("Feedback::Feedback.submitReview"))+"\n      ")])]):e.authenticatedUser.hasPurchased?a("button",{staticClass:"btn btn-primary btn-appearance",attrs:{disabled:e.isLoading},on:{click:function(t){return e.createFeedback()}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.submitReview"))+"\n    ")]):a("div",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"feedback-tooltip-wrapper",attrs:{"data-toggle":"tooltip","data-placement":"top","data-original-title":e.$translate("Feedback::Feedback.errorDoesntOwnProduct")}},[a("button",{staticClass:"btn btn-primary btn-appearance",attrs:{disabled:""}},[e._v("\n        "+e._s(e.$translate("Feedback::Feedback.submitReview"))+"\n      ")])])]):a("div",[a("div",{staticClass:"alert alert-info"},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.logInCustomerReviews"))+"\n    ")]),e._v(" "),a("a",{staticClass:"btn btn-primary btn-appearance",attrs:{"data-toggle":"modal",href:"#login"},on:{click:function(t){return e.createLoginModal()}}},[a("span",[e._v(e._s(e.$translate("Feedback::Feedback.login")))]),e._v(" "),a("i",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}})])])])};i._withStripped=!0;a(4009);var n=a(5353);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var o={name:"FeedbackForm",props:{variationId:Number,options:Object},data:function(){return{feedback:{ratingValue:0,authorName:"",title:"",message:"",type:"review",targetId:this.variationId,honeypot:""},isLoading:!1,titleMissing:!1,ratingMissing:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},(0,n.aH)({authenticatedUser:function(e){return e.feedback.authenticatedUser}})),methods:{createFeedback:function(){var e=this;this.isLoading||this.feedback.honeypot.length>0||(this.feedback.ratingValue<=0?this.ratingMissing=!0:this.feedback.title?(this.isLoading=!0,$.ajax({type:"POST",url:"/rest/feedbacks/feedback/create",data:this.feedback,contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"json",xhrFields:{withCredentials:!0},success:function(t){e.$store.commit("addFeedback",t),e.isLoading=!1,e.feedback.authorName="",e.feedback.message="",e.feedback.title="",e.feedback.ratingValue=0,e.titleMissing=!1,e.ratingMissing=!1},error:function(t,a,s){console.error(s),e.isLoading=!1}})):this.titleMissing=!0)},createLoginModal:function(){this.$store.dispatch("loadComponent","login-modal")}}},d=o,l=a(4486),u=(0,l.A)(d,i,[],!1,null,null,null);u.options.__file="resources/js/src/app/components/item/singleitem/FeedbackForm.vue";var b=u.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"feedback-list"},[e._l(e.feedbacks,(function(t){return a("feedback-list-entry",{key:t.id,attrs:{feedback:t,"is-reply":!1,"show-controls":e.showControls,classes:e.classes,styles:e.styles,options:e.options},on:{delete:function(t){return e.$emit("delete",t)}}})})),e._v(" "),e.isLastPage?e._e():a("a",{staticClass:"btn btn-default btn-block feedback-loadmore",on:{click:function(t){return e.onLoadMoreClicked()}}},[e._v("\n    "+e._s(e.$translate("Feedback::Feedback.loadMore"))+"\n  ")])],2)};f._withStripped=!0;var p={name:"FeedbackList",components:{"feedback-list-entry":a(7560).A},props:{feedbacks:Array,isLastPage:Boolean,showControls:Boolean,classes:String,styles:String,options:Object},methods:{onLoadMoreClicked:function(){this.$emit("load-more")}}},k=(0,l.A)(p,f,[],!1,null,null,null);function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}k.options.__file="resources/js/src/app/components/item/singleitem/FeedbackList.vue";var m={name:"FeedbackContainer",components:{"feedback-form":b,"feedback-list":k.exports},mixins:[a(4304).A],inject:{itemId:{default:null}},props:{options:Object,classes:String,styles:String},data:function(){return{isLoading:!0,feedbackToDelete:null,optionsList:{timestampVisibility:this.options.timestampVisibility,allowGuestFeedbacks:this.options.allowGuestFeedbacks},language:this.options.language,optionsForm:{allowFeedbacksOnlyIfPurchased:this.options.allowFeedbacksOnlyIfPurchased,numberOfFeedbacks:this.options.numberOfFeedbacks,allowGuestFeedbacks:this.options.allowGuestFeedbacks}}},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){g(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({currentVariation:function(){return this.$store.getters[this.itemId+"/currentItemVariation"]},variationId:function(){return this.currentVariation&&this.currentVariation.variation.id}},(0,n.aH)({authenticatedUser:function(e){return e.feedback.authenticatedUser},counts:function(e){return e.feedback.counts},feedbacks:function(e){return e.feedback.feedbacks},invisibleFeedbacks:function(e){return e.feedback.invisibleFeedbacks},pagination:function(e){return e.feedback.pagination}})),mounted:function(){if(App.isShopBuilder)this.isLoading=!1;else{var e=this;$.when(this.getUser(),this.loadFeedbacks()).done((function(){e.isLoading=!1,e.generateJsonLD(),Vue.nextTick((function(){window.dispatchEvent(new Event("resize"))}))}))}},methods:{getUser:function(){return this.$store.dispatch("loadFeedbackUser",{data:{allowFeedbacksOnlyIfPurchased:this.options.allowFeedbacksOnlyIfPurchased,numberOfFeedbacks:this.options.numberOfFeedbacks},itemId:this.itemId,variationId:this.variationId})},loadFeedbacks:function(){return this.$store.dispatch("loadPaginatedFeedbacks",{itemId:this.itemId,feedbacksPerPage:this.options.feedbacksPerPage,language:this.options.language})},showDeleteConfirmation:function(e){this.feedbackToDelete=e,$(this.$refs.confirmDeleteModal).modal("show")},deleteFeedback:function(){if(null!==this.feedbackToDelete){var e=this.feedbackToDelete.feedbackId,t=this.feedbackToDelete.parentFeedbackId;this.$store.dispatch("deleteFeedback",{feedbackId:e,parentFeedbackId:t,feedback:this.feedbackToDelete.feedbackObject})}$(this.$refs.confirmDeleteModal).modal("hide")},generateJsonLD:function(){if(this.counts.ratingsCountTotal>0){var e={"@context":"http://schema.org/","@type":"Product","@id":this.variationId.toString(),aggregateRating:{"@type":"AggregateRating",ratingValue:this.counts.averageValue,reviewCount:this.counts.ratingsCountTotal},review:[]},t=this.$translate("Feedback::Feedback.anonymous")||"Anonymous";this.feedbacks.forEach((function(a){var s={"@type":"Review",author:{name:("user"===a.sourceRelation[0].feedbackRelationType||"contact"===a.sourceRelation[0].feedbackRelationType)&&a.sourceRelation[0].feedbackRelationSourceId>0?a.sourceRelation[0].sourceRelationLabel:"0"===a.sourceRelation[0].feedbackRelationSourceId&&a.authorName.trim().length>0?a.authorName:t,"@type":"Person"},datePublished:a.createdAt,reviewBody:a.feedbackComment.comment.message,name:a.title,reviewRating:{"@type":"Rating",ratingValue:a.feedbackRating.rating.ratingValue}};e.review.push(s)}));var a=document.createElement("script");a.setAttribute("type","application/ld+json"),a.textContent=JSON.stringify(e),document.head.appendChild(a)}}}},h=m,_=(0,l.A)(h,s,[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",{staticClass:"feedback-bar-text-before"},[e._v("\n            5 "),a("i",{staticClass:"fa fa-star"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",{staticClass:"feedback-bar-text-before"},[e._v("\n            4 "),a("i",{staticClass:"fa fa-star"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",{staticClass:"feedback-bar-text-before"},[e._v("\n            3 "),a("i",{staticClass:"fa fa-star"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",{staticClass:"feedback-bar-text-before"},[e._v("\n            2 "),a("i",{staticClass:"fa fa-star"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",{staticClass:"feedback-bar-text-before"},[e._v("\n            1 "),a("i",{staticClass:"fa fa-star"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])}],!1,null,null,null);_.options.__file="resources/js/src/app/components/item/singleitem/FeedbackContainer.vue";var F=_.exports},7560:function(e,t,a){"use strict";a.d(t,{A:function(){return l}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"feedback clearfix",class:{loading:e.isLoading}},[!e.editableFeedback&&e.showControls||e.isFeedbackEditable(e.feedbackData.id)||e.canUserEdit()?a("div",{staticClass:"feedback-options"},[e.feedbackData.isVisible?e._e():a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"btn-sm btn-danger",attrs:{"data-toggle":"tooltip","data-placement":"top","data-original-title":e.$translate("Feedback::Feedback.moderationMessage")}},[a("i",{staticClass:"fa fa-eye-slash"})]),e._v(" "),e.authenticatedUser.isLoggedIn?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],ref:"editButton",staticClass:"btn btn-sm btn-danger",attrs:{"data-toggle":"tooltip","data-placement":"top","data-original-title":e.isReply?e.$translate("Feedback::Feedback.editReply"):e.$translate("Feedback::Feedback.editReview")},on:{click:function(t){return e.editFeedback()}}},[a("i",{staticClass:"fa fa-pencil"})]):e._e(),e._v(" "),e.authenticatedUser.isLoggedIn?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"btn btn-sm btn-danger",attrs:{"data-toggle":"tooltip","data-placement":"top","data-original-title":e.isReply?e.$translate("Feedback::Feedback.deleteReply"):e.$translate("Feedback::Feedback.deleteReview")},on:{click:function(t){return e.showDeleteConfirmation()}}},[a("i",{staticClass:"fa fa-trash-o"})]):e._e()]):e._e(),e._v(" "),e.editableFeedback?e._e():a("feedback-comment",{attrs:{feedback:e.feedbackData,"is-reply":e.isReply,"show-controls":e.showControls,classes:e.classes,styles:e.styles,options:e.options},on:{delete:function(t){return e.$emit("delete",t)}}}),e._v(" "),e.editableFeedback&&e.isReply?a("div",[a("div",{staticClass:"form-group"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editableFeedback.message,expression:"editableFeedback.message"}],staticClass:"form-control",attrs:{rows:"3",placeholder:e.$translate("Feedback::Feedback.replyMessage")},domProps:{value:e.editableFeedback.message},on:{input:function(t){t.target.composing||e.$set(e.editableFeedback,"message",t.target.value)}}})]),e._v(" "),a("button",{staticClass:"btn btn-primary btn-appearance",on:{click:function(t){return e.saveEditableFeedback()}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.editReply"))+"\n    ")]),e._v(" "),a("button",{staticClass:"btn btn-secondary feedback-edit-cancel",on:{click:function(t){e.editableFeedback=null}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.cancel"))+"\n    ")])]):e._e(),e._v(" "),e.editableFeedback&&!e.isReply?a("div",[a("div",{staticClass:"stars"},[e._l([5,4,3,2,1],(function(t){return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.editableFeedback.ratingValue,expression:"editableFeedback.ratingValue"}],key:"stars_input_"+t,class:"star star-"+t,attrs:{id:"star-"+e._uid+"-"+t,type:"radio",name:"ratingValue","aria-hidden":!0},domProps:{value:t,checked:e._q(e.editableFeedback.ratingValue,t)},on:{change:function(a){return e.$set(e.editableFeedback,"ratingValue",t)}}}),e._v(" "),a("label",{key:"stars_label_"+t,class:"star star-"+t,attrs:{"aria-label":"star-"+e.$translate("Feedback::Feedback.feedbackTextLegend")+"-"+t}})]}))],2),e._v(" "),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.editableFeedback.title,expression:"editableFeedback.title"}],staticClass:"form-control",attrs:{type:"text",name:"title",placeholder:e.$translate("Feedback::Feedback.title"),required:"","aria-label":e.$translate("Feedback::Feedback.editReview")+"-"+e.$translate("Feedback::Feedback.title")},domProps:{value:e.editableFeedback.title},on:{input:function(t){t.target.composing||e.$set(e.editableFeedback,"title",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editableFeedback.message,expression:"editableFeedback.message"}],staticClass:"form-control",attrs:{name:"message",rows:"3",placeholder:e.$translate("Feedback::Feedback.title"),"aria-label":e.$translate("Feedback::Feedback.editReview")+"-"+e.$translate("Feedback::Feedback.commentMessage")},domProps:{value:e.editableFeedback.message},on:{input:function(t){t.target.composing||e.$set(e.editableFeedback,"message",t.target.value)}}})]),e._v(" "),a("button",{staticClass:"btn btn-primary btn-appearance",on:{click:function(t){return e.saveEditableFeedback()}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.editReview"))+"\n    ")]),e._v(" "),a("button",{staticClass:"btn btn-secondary feedback-edit-cancel",on:{click:function(t){e.editableFeedback=null}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.cancel"))+"\n    ")])]):e._e()],1)};s._withStripped=!0;a(8476),a(7746),a(5086),a(9193),a(8379);var i=a(5353);function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c={name:"FeedbackListEntry",components:{"feedback-comment":function(){return a.e(4).then(a.bind(a,4165))}},props:{feedback:Object,isReply:Boolean,showControls:Boolean,classes:String,styles:String,options:Object},data:function(){return{editableFeedback:null,isLoading:!1,feedbackData:{}}},created:function(){this.feedbackData=this.feedback},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},(0,i.aH)({authenticatedUser:function(e){return e.feedback.authenticatedUser}})),methods:{showDeleteConfirmation:function(){var e=null;this.isReply&&(e=parseInt(this.feedbackData.targetRelation.feedbackRelationTargetId)),this.$emit("delete",{feedbackId:this.feedbackData.id,isReply:this.isReply,parentFeedbackId:e,feedbackObject:this.feedbackData})},editFeedback:function(){null===this.editableFeedback&&($(this.$refs.editButton).tooltip("dispose"),this.editableFeedback={title:"",message:this.feedbackData.feedbackComment.comment.message,ratingValue:-1,isReply:this.isReply},this.isReply||(this.editableFeedback.title=this.feedbackData.title,this.editableFeedback.ratingValue=this.feedbackData.feedbackRating.rating.ratingValue))},saveEditableFeedback:function(){var e=this;if(null!==this.editableFeedback){var t=this.editableFeedback,a={message:t.message};t.isReply||(a.title=t.title,a.ratingValue=t.ratingValue),this.isLoading=!0,$.ajax({type:"PUT",url:"/rest/feedbacks/feedback/update/"+this.feedback.id,data:a,success:function(a){e.feedbackData.feedbackComment.comment.message=t.message,e.feedbackData.isVisible=a.isVisible,t.isReply||(e.feedbackData.title=t.title,e.feedbackData.feedbackRating.rating.ratingValue=t.ratingValue),e.isLoading=!1},error:function(t,a,s){console.error(s),e.isLoading=!1}})}this.editableFeedback=null},isFeedbackEditable:function(e){var t=[];return!1===this.showControls&&this.authenticatedUser.feedbacks&&this.authenticatedUser.feedbacks.forEach((function(e){e.isVisible&&t.push(e.id)})),t.includes(e)},canUserEdit:function(){return!!this.feedbackData.sourceRelation[0].feedbackRelationSourceId&&("contact"===this.feedbackData.sourceRelation[0].feedbackRelationType&&parseInt(this.feedbackData.sourceRelation[0].feedbackRelationSourceId)===this.authenticatedUser.id)}}},o=c,d=(0,a(4486).A)(o,s,[],!1,null,null,null);d.options.__file="resources/js/src/app/components/item/singleitem/FeedbackListEntry.vue";var l=d.exports}}]);
//# sourceMappingURL=feedback-3.min.js.map