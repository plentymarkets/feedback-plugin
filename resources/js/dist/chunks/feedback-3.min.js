(self.webpackChunkplentymarkets_feedback=self.webpackChunkplentymarkets_feedback||[]).push([[3],{1223:function(e,t,a){var n=a(5112),r=a(30),i=a(3070),s=n("unscopables"),c=Array.prototype;null==c[s]&&i.f(c,s,{configurable:!0,value:r(null)}),e.exports=function(e){c[s][e]=!0}},1530:function(e,t,a){"use strict";var n=a(8710).charAt;e.exports=function(e,t,a){return t+(a?n(e,t).length:1)}},7007:function(e,t,a){"use strict";a(4916);var n=a(1320),r=a(7293),i=a(5112),s=a(8880),c=i("species"),l=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),o="$0"==="a".replace(/./,"$0"),u=i("replace"),d=!!/./[u]&&""===/./[u]("a","$0"),p=!r((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));e.exports=function(e,t,a,u){var f=i(e),b=!r((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),g=b&&!r((function(){var t=!1,a=/a/;return"split"===e&&((a={}).constructor={},a.constructor[c]=function(){return a},a.flags="",a[f]=/./[f]),a.exec=function(){return t=!0,null},a[f](""),!t}));if(!b||!g||"replace"===e&&(!l||!o||d)||"split"===e&&!p){var m=/./[f],h=a(f,""[e],(function(e,t,a,n,r){return t.exec===RegExp.prototype.exec?b&&!r?{done:!0,value:m.call(t,a,n)}:{done:!0,value:e.call(a,t,n)}:{done:!1}}),{REPLACE_KEEPS_$0:o,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),v=h[0],k=h[1];n(String.prototype,e,v),n(RegExp.prototype,f,2==t?function(e,t){return k.call(e,this,t)}:function(e){return k.call(e,this)})}u&&s(RegExp.prototype[f],"sham",!0)}},7850:function(e,t,a){var n=a(111),r=a(4326),i=a(5112)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==r(e))}},7651:function(e,t,a){var n=a(4326),r=a(2261);e.exports=function(e,t){var a=e.exec;if("function"==typeof a){var i=a.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},2261:function(e,t,a){"use strict";var n,r,i=a(7066),s=a(2999),c=a(2309),l=RegExp.prototype.exec,o=c("native-string-replace",String.prototype.replace),u=l,d=(n=/a/,r=/b*/g,l.call(n,"a"),l.call(r,"a"),0!==n.lastIndex||0!==r.lastIndex),p=s.UNSUPPORTED_Y||s.BROKEN_CARET,f=void 0!==/()??/.exec("")[1];(d||f||p)&&(u=function(e){var t,a,n,r,s=this,c=p&&s.sticky,u=i.call(s),b=s.source,g=0,m=e;return c&&(-1===(u=u.replace("y","")).indexOf("g")&&(u+="g"),m=String(e).slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==e[s.lastIndex-1])&&(b="(?: "+b+")",m=" "+m,g++),a=new RegExp("^(?:"+b+")",u)),f&&(a=new RegExp("^"+b+"$(?!\\s)",u)),d&&(t=s.lastIndex),n=l.call(c?a:s,m),c?n?(n.input=n.input.slice(g),n[0]=n[0].slice(g),n.index=s.lastIndex,s.lastIndex+=n[0].length):s.lastIndex=0:d&&n&&(s.lastIndex=s.global?n.index+n[0].length:t),f&&n&&n.length>1&&o.call(n[0],a,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(n[r]=void 0)})),n}),e.exports=u},2999:function(e,t,a){"use strict";var n=a(7293);function r(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=n((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=n((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},8710:function(e,t,a){var n=a(9958),r=a(4488),i=function(e){return function(t,a){var i,s,c=String(r(t)),l=n(a),o=c.length;return l<0||l>=o?e?"":void 0:(i=c.charCodeAt(l))<55296||i>56319||l+1===o||(s=c.charCodeAt(l+1))<56320||s>57343?e?c.charAt(l):i:e?c.slice(l,l+2):s-56320+(i-55296<<10)+65536}};e.exports={codeAt:i(!1),charAt:i(!0)}},9826:function(e,t,a){"use strict";var n=a(2109),r=a(2092).find,i=a(1223),s="find",c=!0;s in[]&&Array(1).find((function(){c=!1})),n({target:"Array",proto:!0,forced:c},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),i(s)},9600:function(e,t,a){"use strict";var n=a(2109),r=a(8361),i=a(5656),s=a(9341),c=[].join,l=r!=Object,o=s("join",",");n({target:"Array",proto:!0,forced:l||!o},{join:function(e){return c.call(i(this),void 0===e?",":e)}})},4916:function(e,t,a){"use strict";var n=a(2109),r=a(2261);n({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},3123:function(e,t,a){"use strict";var n=a(7007),r=a(7850),i=a(9670),s=a(4488),c=a(6707),l=a(1530),o=a(7466),u=a(7651),d=a(2261),p=a(2999).UNSUPPORTED_Y,f=[].push,b=Math.min,g=4294967295;n("split",2,(function(e,t,a){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,a){var n=String(s(this)),i=void 0===a?g:a>>>0;if(0===i)return[];if(void 0===e)return[n];if(!r(e))return t.call(n,e,i);for(var c,l,o,u=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),b=0,m=new RegExp(e.source,p+"g");(c=d.call(m,n))&&!((l=m.lastIndex)>b&&(u.push(n.slice(b,c.index)),c.length>1&&c.index<n.length&&f.apply(u,c.slice(1)),o=c[0].length,b=l,u.length>=i));)m.lastIndex===c.index&&m.lastIndex++;return b===n.length?!o&&m.test("")||u.push(""):u.push(n.slice(b)),u.length>i?u.slice(0,i):u}:"0".split(void 0,0).length?function(e,a){return void 0===e&&0===a?[]:t.call(this,e,a)}:t,[function(t,a){var r=s(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,r,a):n.call(String(r),t,a)},function(e,r){var s=a(n,e,this,r,n!==t);if(s.done)return s.value;var d=i(e),f=String(this),m=c(d,RegExp),h=d.unicode,v=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(p?"g":"y"),k=new m(p?"^(?:"+d.source+")":d,v),y=void 0===r?g:r>>>0;if(0===y)return[];if(0===f.length)return null===u(k,f)?[f]:[];for(var _=0,x=0,R=[];x<f.length;){k.lastIndex=p?0:x;var C,D=u(k,p?f.slice(x):f);if(null===D||(C=b(o(k.lastIndex+(p?x:0)),f.length))===_)x=l(f,x,h);else{if(R.push(f.slice(_,x)),R.length===y)return R;for(var E=1;E<=D.length-1;E++)if(R.push(D[E]),R.length===y)return R;x=_=C}}return R.push(f.slice(_)),R}]}),p)},6927:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"feedback-comment",class:e.classes,style:e.styles},[e.isReply?e._e():a("div",[a("p",{staticClass:"feedback-comment-title"},[e._v("\n      "+e._s(e.feedbackData.title)+"\n    ")]),e._v(" "),e.feedbackData.feedbackRating.rating.ratingValue>0?a("div",{staticClass:"feedback-rating"},e._l(5,(function(t){return a("i",{key:"feedback_rating_"+t,staticClass:"fa fa-star",class:{full:e.feedbackData.feedbackRating.rating.ratingValue>=t,empty:e.feedbackData.feedbackRating.rating.ratingValue<t}})})),0):e._e(),e._v(" "),a("div",{staticClass:"feedback-attributes-list"},[a("p",[e.isPurchased?a("span",{staticClass:"feedback-verified-tag"},[e._v("\n          "+e._s(e.$translate("Feedback::Feedback.verifiedPurchase"))+"\n        ")]):e._e(),e._v(" "),e._l(e.variationAttributes,(function(t,n){return a("span",{key:"feedback_attributes_"+n,staticClass:"feedback-attributes"},[e._v("\n          "+e._s(t.name)+": "+e._s(t.value)+"\n        ")])}))],2)])]),e._v(" "),a("p",{staticClass:"feedback-comment-text",domProps:{innerHTML:e._s(e.message)}}),e._v(" "),a("p",{staticClass:"feedback-info"},[a("span",{staticClass:"feedback-info-segment"},[a("strong",["user"===e.feedbackData.sourceRelation[0].feedbackRelationType?a("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"feedback-admin",attrs:{"data-toggle":"tooltip","data-placement":"top","data-original-title":e.$translate("Feedback::Feedback.shopManagerLabel")}},[a("i",{staticClass:"fa fa-check-square"}),e._v("\n          "+e._s(e.feedbackData.sourceRelation[0].sourceRelationLabel)+"\n        ")]):0==e.feedbackData.sourceRelation[0].feedbackRelationSourceId&&e.feedback.authorName.length>0?a("span",[e._v("\n          "+e._s(e.feedbackData.authorName)+"\n        ")]):0==e.feedbackData.sourceRelation[0].feedbackRelationSourceId?a("span",[e._v("\n          "+e._s(e.$translate("Feedback::Feedback.guestName"))+"\n        ")]):a("span",[e._v("\n          "+e._s(e.displayName)+"\n        ")])])]),e._v(" "),e.options.timestampVisibility?a("span",{staticClass:"feedback-info-segment"},[a("i",{staticClass:"fa fa-calendar text-muted"}),e._v("\n      "+e._s(e._f("date")(e.feedbackData.createdAt,e.$translate("Ceres::Template.devDateFormatMoment")||"DD.MM.YYYY"))+"\n    ")]):e._e(),e._v(" "),e.isReply||!e.authenticatedUser.isLoggedIn&&!e.options.allowGuestFeedbacks?e._e():a("span",{staticClass:"feedback-info-segment btn btn-sm btn-default",on:{click:function(t){e.replyFormVisible=!e.replyFormVisible}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.addComment"))+"\n    ")]),e._v(" "),e.feedbackData.replies&&e.feedbackData.replies.length>0&&!e.replyListVisible?a("span",{staticClass:"feedback-info-segment btn btn-sm btn-default",on:{click:function(t){e.replyListVisible=!e.replyListVisible}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.viewComments"))+" ("+e._s(e.feedbackData.replies.length)+")\n    ")]):e.feedbackData.replies&&e.feedbackData.replies.length>0&&e.replyListVisible?a("span",{staticClass:"feedback-info-segment btn btn-sm btn-default",on:{click:function(t){e.replyListVisible=!e.replyListVisible}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.hideComments"))+"\n    ")]):e._e()]),e._v(" "),e.replyFormVisible&&!e.isReply&&(e.authenticatedUser.isLoggedIn||e.options.allowGuestFeedbacks)?a("div",{staticClass:"feedback-add-reply"},[!e.authenticatedUser.isLoggedIn&&e.options.allowGuestFeedbacks?a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.authorName,expression:"authorName"}],staticClass:"form-control",attrs:{id:"author",type:"text",name:"author",placeholder:e.$translate("Feedback::Feedback.authorName"),disabled:e.authenticatedUser.limitReached||!e.authenticatedUser.hasPurchased},domProps:{value:e.authorName},on:{input:function(t){t.target.composing||(e.authorName=t.target.value)}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.honeypot,expression:"honeypot"}],staticClass:"form-control",attrs:{id:"comment-textfield",type:"text",name:"comment-textfield"},domProps:{value:e.honeypot},on:{input:function(t){t.target.composing||(e.honeypot=t.target.value)}}})]):e._e(),e._v(" "),a("div",{staticClass:"form-group"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.replyMessage,expression:"replyMessage"}],staticClass:"form-control",attrs:{name:"message",rows:"3",placeholder:e.$translate("Feedback::Feedback.commentMessage")},domProps:{value:e.replyMessage},on:{input:function(t){t.target.composing||(e.replyMessage=t.target.value)}}})]),e._v(" "),a("button",{staticClass:"btn btn-primary btn-appearance",attrs:{disabled:!e.replyMessage},on:{click:function(t){return e.createReply()}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.submitComment"))+"\n    ")])]):e._e(),e._v(" "),e.feedbackData.replies&&e.feedbackData.replies.length>0&&e.replyListVisible?a("div",{staticClass:"feedback-replies"},e._l(e.feedbackData.replies,(function(t){return a("feedback-list-entry",{key:t.id,attrs:{feedback:t,"is-reply":!0,"show-controls":e.showControls,classes:e.classes,styles:e.styles,options:e.options},on:{delete:function(t){return e.$emit("delete",t)}}})})),1):e._e()])};n._withStripped=!0;a(2526),a(7327),a(9826),a(9554),a(9600),a(1249),a(5003),a(9337),a(7941),a(4916),a(3123),a(4747);var r=a(8384),i=a(629);function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l={name:"FeedbackComment",components:{"feedback-list-entry":r.Z},props:{feedback:Object,isReply:Boolean,showControls:Boolean,classes:String,styles:String,options:Object},data:function(){return{authorName:"",replyMessage:"",replyFormVisible:!1,replyListVisible:!1,honeypot:"",feedbackData:{}}},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({variationAttributes:function(){if("variation"!==this.feedbackData.targetRelation.feedbackRelationType||this.feedbackData.targetRelation.targetRelationName.length<=0||!this.feedbackData.targetRelation.variationAttributes||!this.itemAttributes)return[];var e=this;return this.feedbackData.targetRelation.variationAttributes.map((function(t){var a=e.feedbackData.targetRelation.feedbackRelationTargetId;if(!Object.prototype.hasOwnProperty.call(e.itemAttributes,a)||!Object.prototype.hasOwnProperty.call(e.itemAttributes[a],t.attributeId)||!Object.prototype.hasOwnProperty.call(e.itemAttributes[a][t.attributeId],t.valueId))return null;var n=e.itemAttributes[a][t.attributeId][t.valueId];return{name:n.attributeName,value:n.attributeValue}})).filter((function(e){return null!==e}))},displayName:function(){var e=this.feedbackData.sourceRelation[0].sourceRelationLabel;return" "!==e?e.split(" ").map((function(e,t){return 0===t?e+" ":e.substr(0,1)+"."})).join(""):$translate("Feedback::Feedback.guestName")},message:function(){return this.feedbackData.feedbackComment?this.feedbackData.feedbackComment.comment.message.split("\n").join("<br />"):""},isPurchased:function(){return this.feedbackData.sourceRelation.find((function(e){return"orderItem"===e.feedbackRelationType}))}},(0,i.rn)({authenticatedUser:function(e){return e.feedback.authenticatedUser},itemAttributes:function(e){return e.feedback.itemAttributes}})),created:function(){this.feedbackData=this.feedback},methods:{createReply:function(){if(this.replyMessage&&!(this.honeypot.length>0)){var e=this;$.ajax({type:"POST",url:"/rest/feedbacks/feedback/create",data:{authorName:this.authorName,message:this.replyMessage,targetId:this.feedbackData.id,type:"reply"},contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"json",xhrFields:{withCredentials:!0},success:function(t){e.feedbackData.replies||(e.feedbackData.replies=[]),e.feedbackData.replies.unshift(t),e.replyMessage="",e.replyFormVisible=!1,e.replyListVisible=!0}})}}}},o=(0,a(1900).Z)(l,n,[],!1,null,null,null);o.options.__file="resources/js/src/app/components/item/singleitem/FeedbackComment.vue";var u=o.exports}}]);
//# sourceMappingURL=feedback-3.min.js.map